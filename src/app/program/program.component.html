<mat-sidenav-container>
  <mat-sidenav #sidenav role="navigation" [opened]="showcaseOpen$ | async">
    <app-showcase></app-showcase>
  </mat-sidenav>
  <mat-sidenav-content>
    <main>
      <div class="wrapper" *ngIf="dateOpen$ | async; let dateOpen" fxLayout fxLayoutAlign="center">
        <div class="accordion-container">
          <mat-accordion class="year-accordion">
            <mat-expansion-panel
              class="year-expansion-panel" 
              hideToggle 
              *ngFor="let year of years" 
              [expanded]="year.yearName === dateOpen[2]">
              <mat-expansion-panel-header class="year-expansion-panel-header">
                <mat-panel-title class="year-panel-title">
                  {{year.yearName}}
                </mat-panel-title>
              </mat-expansion-panel-header>
              <mat-accordion class="month-accordion">
                <mat-expansion-panel
                  class="month-expansion-panel"
                  hideToggle
                  *ngFor="let month of year.months" 
                  [expanded]="month.name === dateOpen[0]">
                  <mat-expansion-panel-header class="month-expansion-panel-header">
                    <mat-panel-title class="month-panel-title">
                      {{month.name | numbertomonth}}
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <mat-accordion class="gig-accordion">
                    <mat-expansion-panel
                      class="gig-expansion-panel"
                      hideToggle
                      *ngFor="let gig of month.gigs" 
                      [expanded]="
                        gig.name === dateOpen[1] ||
                        dateOpen[1] + 1 === gig.name ||
                        dateOpen[1] + 2 === gig.name ||
                        dateOpen[1] + 3 === gig.name ||
                        dateOpen[1] + 4 === gig.name ||
                        dateOpen[1] + 5 === gig.name ||
                        dateOpen[1] + 6 === gig.name">
                      <mat-expansion-panel-header class="gig-expansion-panel-header">
                        <mat-panel-title
                          class="gig-panel-title"
                          (click)="onGigDate(month.name, gig.name, year.yearName)">
                          {{gig.name}}
                        </mat-panel-title>
                        <mat-panel-description
                          class="gig-panel-description">
                          <ul class="featured-artist-list">
                            <li class="featured-artist-list-item" *ngFor="let booking of gig.bookings" fxLayout fxLayoutAlign="space-between">
                              <span>{{booking.isFeatured === true ? booking.artist.name : null}}</span>
                            </li>
                          </ul>
                        </mat-panel-description>
                      </mat-expansion-panel-header>
                      <ul class="bookings-list">
                        <li
                          class="bookings-list-item"
                          *ngFor="let booking of gig.bookings" 
                          fxLayout 
                          fxLayoutAlign="space-between">
                          <div class="name-instrument-container"
                            style="width: 100%;"
                            fxLayout
                            fxLayoutAlign="space-between"
                            (click)="bookingSelected(booking)">
                            <div
                              [ngClass]="{'large-font': !isAuthenticated}"
                              class="name-instrument"
                              style="width: 100%;"
                              fxLayout
                              fxLayoutAlign="space-between center center">
                              <span class="name">
                                {{booking.artist.name}}
                              </span>
                              <span class="instrument">
                                {{booking.artist.instrument}}
                              </span>
                            </div>  
                          </div>
                        </li>
                      </ul>
                    </mat-expansion-panel>
                  </mat-accordion>
                </mat-expansion-panel>
              </mat-accordion>
            </mat-expansion-panel>
          </mat-accordion>
        </div>
      </div>

    </main>
  </mat-sidenav-content> 
</mat-sidenav-container>



